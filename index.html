<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Our Love Story</title>
  <style>
    /* CSS Variables for Light Mode (Default) */
    :root{
      --bg:#fdeef6;
      --env:#ff6b89;
      --env-dark:#e34f6b;
      --paper:#fff9f8;
      --text:#4b2a2a;
      --accent:#ff85a2;
      --shadow:0 10px 30px rgba(0,0,0,0.08);
      --light-pink:#ffeff5;
      --card-bg:#fff;
      --lightbox-bg:rgba(0,0,0,0.92);
      --heart-color:#ff85a2;
      --footer-color:#9e8a8a;
      --secondary-btn:#a78f97;
      --secondary-btn-hover:#9a7f88;
      --gallery-label:rgba(0,0,0,0.7);
      --time-card-border:#ff85a2;
      --time-card-bg:#fff9fb;
    }
    
    /* CSS Variables for Dark Mode */
    :root[data-theme="dark"] {
      --bg:#1a0f1a;
      --env:#c44569;
      --env-dark:#a93558;
      --paper:#2a1a2a;
      --text:#f0d6e8;
      --accent:#d87093;
      --shadow:0 10px 30px rgba(0,0,0,0.3);
      --light-pink:#2a1a2a;
      --card-bg:#2a1a2a;
      --lightbox-bg:rgba(0,0,0,0.95);
      --heart-color:#d87093;
      --footer-color:#b8a8b8;
      --secondary-btn:#6d5d6d;
      --secondary-btn-hover:#5c4c5c;
      --gallery-label:rgba(0,0,0,0.8);
      --time-card-border:#c44569;
      --time-card-bg:#2a1a2a;
    }
    
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow-x:hidden;}
    body{background:linear-gradient(180deg,var(--bg) 0%, #1a0f1a 100%);overflow:hidden; transition:background 0.5s ease;}

    /* Dark Mode Toggle Button */
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--env);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    
    .theme-toggle:hover {
      transform: scale(1.1);
      background: var(--env-dark);
    }
    
    .theme-toggle .moon { display: none; }
    .theme-toggle .sun { display: block; }
    
    :root[data-theme="dark"] .theme-toggle .moon { display: block; }
    :root[data-theme="dark"] .theme-toggle .sun { display: none; }

    /* GENERAL PAGE LAYOUT */
    .page{display:none;height:100vh;width:100%;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center;animation:fadeIn 1s ease;position:relative;transition:background 0.5s ease;}
    .page.active{display:flex;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}

    .nav-buttons{margin-top:30px;display:flex;gap:15px;justify-content:center;z-index:2;}
    button{padding:12px 24px;border:none;border-radius:50px;background:var(--env-dark);color:#fff;font-size:16px;cursor:pointer;box-shadow:0 4px 12px rgba(227,79,107,0.3);transition:all 0.3s;z-index:2;font-weight:600;letter-spacing:0.5px;}
    button:hover{transform:translateY(-3px);box-shadow:0 8px 18px rgba(227,79,107,0.4);}
    button.secondary{background:var(--secondary-btn);}
    button.secondary:hover{background:var(--secondary-btn-hover);}
    
    /* Letter pagination button disabled state */
    .letter-pagination button:disabled {
      cursor: not-allowed;
      transform: none !important;
      box-shadow: none !important;
      opacity: 0.5;
    }
    
    .letter-pagination button:disabled:hover {
      transform: none !important;
      box-shadow: none !important;
    }

    /* HEADER DECORATION */
    .page-header{position:relative;margin-bottom:25px;}
    .page-header h1{font-size:32px;color:var(--env-dark);margin:0;position:relative;display:inline-block;transition:color 0.5s ease;}
    .page-header h1:after{content:'';position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);width:60px;height:3px;background:var(--accent);border-radius:3px;transition:background 0.5s ease;}
    .heart-decoration{font-size:24px;color:var(--accent);margin:0 8px;transition:color 0.5s ease;}

    /* FLOATING HEARTS */
    .hearts{position:absolute;inset:0;overflow:hidden;z-index:1;}
    .heart{position:absolute;bottom:-50px;font-size:24px;color:var(--heart-color);opacity:0.7;animation:floatUp 6s linear infinite;transition:color 0.5s ease;}
    @keyframes floatUp{
      0%{transform:translateY(0) scale(1) rotate(0deg);opacity:0.7;}
      50%{opacity:1;}
      100%{transform:translateY(-110vh) scale(1.3) rotate(20deg);opacity:0;}
    }

    /* INTRO PAGE */
    .music-card{background:var(--card-bg);border-radius:20px;box-shadow:var(--shadow);padding:30px;max-width:380px;text-align:center;animation:float 3s ease-in-out infinite;z-index:2;border:1px solid rgba(255,255,255,0.1);transition:all 0.5s ease;}
    .music-card img{width:100%;border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,0.1);transition:transform 0.5s;}
    .music-card:hover img{transform:scale(1.02);}
    .music-info{margin-top:20px;}
    .music-info h2{margin:0;font-size:26px;color:var(--env-dark);transition:color 0.5s ease;}
    .music-info p{margin:12px 0;color:var(--text);font-size:15px;line-height:1.6;transition:color 0.5s ease;}
    @keyframes float{0%{transform:translateY(0);}50%{transform:translateY(-10px);}100%{transform:translateY(0);}}

    /* PAGE 1: ENHANCED GALLERY */
    #gallery-page{padding:20px;justify-content:flex-start;padding-top:80px;}
    #gallery-page .gallery-container{width:100%;max-width:1200px;}
    
    .gallery-controls{display:flex;justify-content:center;align-items:center;gap:15px;margin-bottom:25px;}
    .gallery-nav-btn{background:var(--env);color:white;border:none;width:40px;height:40px;border-radius:50%;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.3s;}
    .gallery-nav-btn:hover{background:var(--env-dark);transform:scale(1.1);}
    
    .gallery{display:grid;grid-template-columns:repeat(auto-fill, minmax(180px, 1fr));gap:20px;justify-content:center;margin-bottom:30px;}
    .gallery-item{position:relative;border-radius:16px;overflow:hidden;box-shadow:var(--shadow);height:220px;cursor:pointer;transition:all 0.4s ease;}
    .gallery-item:hover{transform:translateY(-8px);box-shadow:0 15px 30px rgba(0,0,0,0.25);}
    .gallery-item img{width:100%;height:100%;object-fit:cover;transition:transform 0.5s;}
    .gallery-item:hover img{transform:scale(1.08);}
    .gallery-item .photo-label{position:absolute;bottom:0;left:0;right:0;background:var(--gallery-label);color:white;padding:8px;font-size:14px;transform:translateY(100%);transition:transform 0.3s;}
    .gallery-item:hover .photo-label{transform:translateY(0);}
    
    .gallery-counter{color:var(--env-dark);font-weight:600;margin-top:10px;font-size:15px;transition:color 0.5s ease;}

    /* IMPROVED LIGHTBOX */
    .lightbox{
      position:fixed;
      inset:0;
      background:var(--lightbox-bg);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      opacity:0;
      visibility:hidden;
      transition:opacity 0.5s ease, background 0.5s ease;
      z-index:100;
    }
    .lightbox.active{
      opacity:1;
      visibility:visible;
    }
    .lightbox-content{display:flex;flex-direction:column;align-items:center;width:90%;max-width:900px;}
    .lightbox img{
      max-width:100%;
      max-height:70vh;
      border-radius:12px;
      box-shadow:0 15px 40px rgba(0,0,0,0.5);
      transform:scale(0.7);
      opacity:0;
      animation:revealImg 0.6s forwards;
    }
    @keyframes revealImg{
      to{transform:scale(1);opacity:1;}
    }
    .lightbox-info{color:white;margin-top:20px;text-align:center;max-width:600px;}
    .lightbox-info h3{font-size:22px;margin-bottom:8px;}
    .lightbox-info p{font-size:16px;opacity:0.9;}
    .lightbox-close{position:absolute;top:30px;right:30px;background:none;border:none;color:white;font-size:30px;cursor:pointer;z-index:101;}
    .lightbox-nav{position:absolute;top:50%;transform:translateY(-50%);width:100%;display:flex;justify-content:space-between;padding:0 30px;}
    .lightbox-nav button{background:rgba(255,255,255,0.2);border:none;color:white;width:50px;height:50px;border-radius:50%;font-size:22px;cursor:pointer;transition:all 0.3s;}
    .lightbox-nav button:hover{background:rgba(255,255,255,0.3);transform:scale(1.1);}

    /* ENVELOPE PAGE WITH MULTIPLE LETTERS - MADE BIGGER */
    #envelope-page{justify-content:center;padding-top:60px;padding-bottom:60px;overflow-y:auto;}
    
    /* ENVELOPE CONTAINER - BIGGER SIZE */
    .envelope-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
      max-width: 1400px;
      margin-bottom: 40px;
    }
    
    .scene{
      width:420px; /* Made bigger from 350px */
      height:350px; /* Made bigger from 280px */
      perspective:1000px;
    }
    
    .envelope{
      width:100%;
      height:100%;
      position:relative;
      transform-style:preserve-3d;
      cursor:pointer;
      transition:transform 700ms cubic-bezier(.2,.9,.25,1);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    
    .body{
      position:absolute;
      inset:0;
      border-radius:16px; /* Slightly bigger radius */
      background:linear-gradient(135deg,var(--env) 0%,var(--env-dark) 100%);
      box-shadow:0 20px 40px rgba(0,0,0,.2); /* Enhanced shadow */
      transform:translateZ(-1px);
      overflow:hidden;
      transition:background 0.5s ease;
    }
    
    .flap{
      position:absolute;
      left:0;
      right:0;
      top:0;
      height:60%;
      background:linear-gradient(180deg,var(--env-dark),var(--env));
      transform-origin:top center;
      transform:rotateX(0deg);
      border-bottom:1px solid rgba(0,0,0,.06);
      transition:transform 800ms cubic-bezier(.2,.9,.25,1), background 0.5s ease;
      clip-path:polygon(0 0,100% 0,50% 100%);
    }
    
    .seal{
      position:absolute;
      left:50%;
      top:38%;
      transform:translate(-50%,-50%);
      width:80px; /* Made bigger from 60px */
      height:80px; /* Made bigger from 60px */
      border-radius:50%;
      background:radial-gradient(circle at 30% 25%, #ffd0da, var(--env-dark));
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 8px 25px rgba(227,79,107,.4),inset 0 -8px 15px rgba(0,0,0,.08);
      font-weight:700;
      color:white;
      font-size:32px; /* Made bigger from 26px */
      letter-spacing:1px;
      z-index:2;
      transition:all 0.5s;
    }
    
    .envelope.open .seal{
      transform:translate(-50%, -50%) scale(0.8);
      opacity:0.7;
    }
    
    .letter{
      position:absolute;
      left:15px; /* Adjusted for bigger size */
      right:15px; /* Adjusted for bigger size */
      top:20px; /* Adjusted for bigger size */
      bottom:15px; /* Adjusted for bigger size */
      background:var(--paper);
      border-radius:10px; /* Slightly bigger radius */
      padding:30px 25px; /* More padding */
      transform-origin:top center;
      transform:translateY(25px) translateZ(1px);
      box-shadow:0 10px 30px rgba(0,0,0,.12), inset 0 0 10px rgba(0,0,0,0.04);
      opacity:0;
      transition:transform 800ms cubic-bezier(.2,.9,.25,1),opacity 400ms ease, background 0.5s ease;
      pointer-events:none;
      overflow-y:auto;
      max-height:calc(100% - 35px);
    }
    
    .envelope.open .flap{
      transform:rotateX(-180deg)
    }
    
    .envelope.open .letter{
      transform:translateY(-20px) translateZ(50px); /* More lift */
      opacity:1;
      pointer-events:auto;
    }
    
    /* IMPROVED LETTER CONTENT */
    .message{
      text-align:left;
      line-height:1.6;
    }
    
    .message h1{
      margin:0 0 15px; /* More margin */
      font-size:26px; /* Bigger font */
      color:var(--env-dark);
      text-align:center;
      transition:color 0.5s ease;
    }
    
    .letter-date{
      text-align:center;
      color:var(--text);
      font-size:16px; /* Slightly bigger */
      margin-bottom:25px; /* More margin */
      font-style:italic;
      opacity:0.8;
      transition:color 0.5s ease;
    }
    
    .message p{
      margin:0 0 20px; /* More margin between paragraphs */
      font-size:16px; /* Bigger text */
      line-height:1.7; /* Better line height */
      color:var(--text);
      text-align:justify;
      transition:color 0.5s ease;
    }
    
    .message .highlight{
      color:var(--env-dark);
      font-weight:600;
      transition:color 0.5s ease;
    }
    
    .letter-signature{
      text-align:right;
      margin-top:30px; /* More margin */
      padding-top:20px; /* More padding */
      border-top:2px dashed var(--accent); /* Thicker border */
    }
    
    .letter-signature p{
      margin:5px 0;
      color:var(--text);
      font-size:18px; /* Bigger font */
      transition:color 0.5s ease;
    }
    
    /* LETTER PAGINATION */
    .letter-pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    
    .letter-pagination button {
      padding: 8px 20px;
      background: var(--accent);
      font-size: 14px;
    }
    
    .letter-pagination span {
      color: var(--env-dark);
      font-weight: 600;
      font-size: 16px;
      min-width: 100px;
      text-align: center;
    }
    
    /* LETTER PAGE CONTENT */
    .letter-page {
      display: none;
    }
    
    .letter-page.active {
      display: block;
    }

    /* TIME PAGE */
    .time-card{background:var(--time-card-bg);border-radius:20px;padding:35px 25px;box-shadow:var(--shadow);max-width:400px;text-align:center;border:2px solid var(--time-card-border);position:relative;overflow:hidden;transition:all 0.5s ease;}
    .time-card:before{content:'';position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg, var(--env), var(--accent));transition:background 0.5s ease;}
    .time-card h1{color:var(--env-dark);font-size:24px;margin:0 0 20px;transition:color 0.5s ease;}
    .time-card p{margin:12px 0;font-size:17px;font-weight:500;color:var(--text);transition:color 0.5s ease;}
    .cute-heart{font-size:22px;color:var(--accent);display:inline-block;margin-right:8px;transition:color 0.5s ease;}
    .counter-display{font-size:18px;background:var(--light-pink);padding:15px;border-radius:12px;margin:20px 0;transition:background 0.5s ease;}
    .counter-display p {color:var(--text);}
    
    /* FOOTER NOTE */
    .footer-note{position:absolute;bottom:20px;color:var(--footer-color);font-size:14px;text-align:center;width:100%;transition:color 0.5s ease;}
    
    /* RESPONSIVE ADJUSTMENTS */
    @media (max-width: 1200px) {
      .envelope-container {
        gap: 30px;
      }
    }
    
    @media (max-width: 992px) {
      .envelope-container {
        flex-direction: column;
        align-items: center;
      }
      
      .scene {
        width: 380px;
        height: 320px;
      }
      
      .theme-toggle {
        top: 15px;
        right: 15px;
        width: 45px;
        height: 45px;
        font-size: 20px;
      }
    }
    
    @media (max-width: 768px) {
      .gallery{grid-template-columns:repeat(auto-fill, minmax(150px, 1fr));gap:15px;}
      .gallery-item{height:190px;}
      .scene{width:340px;height:290px;}
      .letter{padding:25px 20px;}
      .message p{font-size:15px;}
      .page-header h1{font-size:26px;}
      .envelope-container {
        gap: 20px;
      }
    }
    
    @media (max-width: 480px) {
      .gallery{grid-template-columns:repeat(2, 1fr);}
      .gallery-item{height:170px;}
      .music-card{padding:20px;max-width:320px;}
      .nav-buttons{gap:10px;flex-wrap:wrap;}
      button{padding:10px 18px;font-size:14px;}
      .scene{width:300px;height:260px;}
      .letter{padding:20px 18px;}
      .message h1{font-size:22px;}
      .message p{font-size:14px;}
      .theme-toggle {
        top: 10px;
        right: 10px;
        width: 40px;
        height: 40px;
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <!-- Dark Mode Toggle Button -->
  <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
    <span class="moon">üåô</span>
    <span class="sun">‚òÄÔ∏è</span>
  </button>

  <!-- PAGE 0: INTRO / THEME SONG -->
  <div class="page active" id="intro-page">
    <div class="hearts" id="hearts"></div>
    <div class="page-header">
      <span class="heart-decoration">üíñ</span>
      <h1>My Memory Book For My Greatest Love</h1>
      <span class="heart-decoration">üíñ</span>
    </div>
    <div class="music-card">
      <img src="cover.jpg" alt="Theme song cover">
      <div class="music-info">
        <h2>üé∂ Our Theme Song</h2>
        <p><em>"This song reminds me of the day you said YES... the moment my world became brighter, and my heart finally found its home in you."</em></p>
        <p>You are my melody, my safe place, and the sweetest part of my story. Every beat of this song is for you. üíï</p>
        <button id="playSong">‚ñ∂ Play Theme Song</button>
      </div>
    </div>
    <div class="nav-buttons">
      <button id="toGallery">View Our Memories ‚ûù</button>
    </div>
    <div class="footer-note">Made with üíñ for Lyn</div>
  </div>

  <!-- PAGE 1: ENHANCED GALLERY -->
  <div class="page" id="gallery-page">
    <div class="hearts" id="gallery-hearts"></div>
    <div class="page-header">
      <span class="heart-decoration">üì∏</span>
      <h1>Our Beautiful Memories</h1>
      <span class="heart-decoration">üíû</span>
    </div>
    
    <div class="gallery-container">
      <div class="gallery-controls">
        <button class="gallery-nav-btn" id="prev-gallery">‚Üê</button>
        <span class="gallery-counter">Memories 1-6 of 6</span>
        <button class="gallery-nav-btn" id="next-gallery">‚Üí</button>
      </div>
      
      <div class="gallery" id="memory-gallery">
        <!-- Gallery items will be dynamically added -->
      </div>
    </div>
    
    <div class="nav-buttons">
      <button class="secondary" id="backToIntro">‚¨Ö Back to Song</button>
      <button id="toEnvelope">Open Love Letter ‚ûù</button>
    </div>
    <div class="footer-note">Click on any photo to view it larger</div>
  </div>

  <!-- Enhanced Lightbox -->
  <div class="lightbox" id="lightbox">
    <button class="lightbox-close" id="close-lightbox">√ó</button>
    <div class="lightbox-content">
      <img src="" alt="expanded memory" id="lightbox-image">
      <div class="lightbox-info">
        <h3 id="lightbox-title">Our Memory</h3>
        <p id="lightbox-date">A beautiful moment in our journey</p>
      </div>
    </div>
    <div class="lightbox-nav">
      <button id="lightbox-prev">‚Üê</button>
      <button id="lightbox-next">‚Üí</button>
    </div>
  </div>

  <!-- PAGE 2: ENVELOPE WITH MULTIPLE LETTER PAGES -->
  <div class="page" id="envelope-page">
    <div class="page-header">
      <span class="heart-decoration">üíå</span>
      <h1>Love Letters for You</h1>
      <span class="heart-decoration">üíå</span>
    </div>
    
    <div class="envelope-container">
      <!-- ENVELOPE 1: 15th Monthsary -->
      <div class="scene">
        <div class="envelope" id="env1">
          <div class="body"></div>
          <div class="flap"></div>
          <div class="seal">15</div>
          <div class="letter" id="letter1">
            <!-- LETTER PAGINATION -->
            <div class="letter-pagination">
              <button class="prev-page" id="prev-letter-1">‚Üê Prev</button>
              <span>Page <span class="current-page">1</span> of <span class="total-pages">1</span></span>
              <button class="next-page" id="next-letter-1">Next ‚Üí</button>
            </div>
            
            <!-- PAGE 1 -->
            <div class="letter-page active" data-page="1">
              <div class="message">
                <h1>To My Baby Lyn</h1>
                <div class="letter-date">Happy 15th Monthsary! üíñ</div>
                
                <p>My love,</p>
                
                <p>happy 15th monthsarry lovee!!ü•∞‚ú®üíãüòö I hope magustuhan moto love ko, gawa ko sayo and for the nxt month mas gaganda pato plss kulang lg tlga sa time yong paggwa ko neto, so love angdami na natin pinagdaanan huhu super super rami‚òπÔ∏è iknow na nmn I have mistake sayo :< sana love sa mga nagawa kong kasalanan sayo mapatawad monako :< and love alam mo iniiwasan ko nmn tlgang gumawa ng ikakahurt mo love e pero diko alam kung bakit hindi ako maiwas iwasan nyan bwesit. and love sana ako parin piliin mo hanngang dulo kahit nakaksawa nako at nkakainis sayo‚ú®üôÅü•∫ love naalala ko pa nong mga dati natin memories diko malilimutan yon. iwishh na sana mabalik sa umpisa yong love natin parehas nmn tayo may gusto non sana love bumalik nlg tayo sa umpisa at ibalik natin kung ano meron tayo love napapansin ko din kasi nagbabago n tlga tayo üòîüôÉ love thank thank you for the past months for making me loved, and important to you naapreciate ko yon love ko sana maramdamn mo din yong love ko sayo khit n nkkasakit ako sayo I'm really sorry love love ko, gusto ko magiingat ka palagi sa araw araw gusto ko masaya ka palagi. and love I'm really proud of youu kung alm mo lg ü´µü´∂ lagi mong galingan mahal ko, and goodluck din s college mo ah iwasan mo yong mga ikakahurt ko kundi iiyak akoüôÅü•∫. so ayon lg love huhu iloveyouuuu smm mahal ko üíãüíñüíóüíêüíê Happy 15th monthsarry baby ko mwaaüíåüå∑üíûü´Ç</p>
                
                <p style="margin-top:10px">Nagmamahal, <br><strong>-your love,gab</strong></p>
                
                <div class="letter-signature">
                  <p>Forever yours,</p>
                  <p><strong>Your love, Gab</strong></p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <p style="color:var(--text); opacity:0.8; margin-top:10px; font-size:14px;">15th Monthsary Letter</p>
      </div>
      
      <!-- ENVELOPE 2: To My Wife -->
      <div class="scene">
        <div class="envelope" id="env2">
          <div class="body"></div>
          <div class="flap"></div>
          <div class="seal">16</div>
          <div class="letter" id="letter2">
            <!-- LETTER PAGINATION -->
            <div class="letter-pagination">
              <button class="prev-page" id="prev-letter-2">‚Üê Prev</button>
              <span>Page <span class="current-page">1</span> of <span class="total-pages">2</span></span>
              <button class="next-page" id="next-letter-2">Next ‚Üí</button>
            </div>
            
            <!-- PAGE 1 -->
            <div class="letter-page active" data-page="1">
              <div class="message">
                <h1>To My Future Wife</h1>
                <div class="letter-date">Happy 20th Monthsarry üíêüíù</div>
                
                <p>My dearest Lyn,</p>
                
                <p>Happy 20th Monthsarry Babyyüíãüåπ Iloveyouuuu smüíù Thankyou for being my side always, thru my ups and down. nndyan kaparin sakin kahit n nakakainis ako I know  you have so many expectations from me na siguro diko naattain yon kaya ganyan ka pero love n love kita and naiintindihan ko nmn yon and sorry love sa mga kasalanan kong nagawa sayo pagpasesyahan mona plss alam kong mabilis yan uminit ulo moo, pero love n love parin kita onti nlg love 2nd anniversary n natin pag papaplanuhan konayon for us n sana or dapat medyo bongga ang susunod n anniversary natin gusto kong maglevel up pa n di lg tayo nagsstick lg sa gantong situations magsisipag ako para sayo love ko. and sana may mga bagay kang natutunan sakin and naiintindihan iHope na mag grow pa tayo ng sabay para in the future were ready to be soon your HUSBAND and my WIFEüíç thankyou sm sa lahat love and super duper efforts mo sakin I appreciated lahat yon super naapreaciate ko and ikaw lg at ikaw lg ang mamahalin koü´µüèº at pagnanasahan ko ü•∫ iloveyouuuu smm baby koo üíãüíñ HAPPY 20TH MONTHSARRY SATIN BABY iloveyouuuu üòöüíìü´¶üíó"</p>
               <div class="letter-signature">
                  <p>With all my love,</p>                         
                  <p><strong>Always yours, Gab</strong></p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <p style="color:var(--text); opacity:0.8; margin-top:10px; font-size:14px;">20th Monthsarry</p>
      </div>
    </div>
    
    <p style="color:var(--text); opacity:0.8; margin-top:10px; max-width:800px; line-height:1.6; padding:0 20px;">
      Click on any envelope to open/close the letter. Click "Prev" on first page or "Next" on last page to go to Countdown.
    </p>
    
    <div class="nav-buttons">
      <button class="secondary" id="backToGallery">‚¨Ö Back to Gallery</button>
      <button id="toTime">Next: Countdown ‚ûù</button>
    </div>
  </div>

  <!-- PAGE 3: TIME COUNTER -->
  <div class="page" id="time-page">
    <div class="page-header">
      <span class="heart-decoration">‚è≥</span>
      <h1>Our Time Together</h1>
      <span class="heart-decoration">üíù</span>
    </div>
    
    <div class="time-card">
      <h1>‚è≥ Time We've Shared</h1>
      <p>Every moment with you is a treasure</p>
      
      <div class="counter-display">
        <p id="counter">Loading our beautiful time...</p>
      </div>
      
      <p><span class="cute-heart">üíñ</span> Since June 6, 2024 <span class="cute-heart">üíñ</span></p>
      <p>Counting every second I get to love you</p>
    </div>
    
    <div class="nav-buttons">
      <button class="secondary" id="backToEnvelope">‚¨Ö Back to Letter</button>
      <button onclick="location.href='#intro-page'; document.getElementById('intro-page').classList.add('active'); document.getElementById('time-page').classList.remove('active');">Back to Start üîÑ</button>
    </div>
    
    <div class="footer-note">Made with endless love for my Lyn üíï</div>
  </div>

  <!-- MUSIC FILE -->
  <audio id="bg-music" loop>
    <source src="music.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    // ==================== DARK MODE FUNCTIONALITY ====================
    
    // Get theme toggle button
    const themeToggle = document.getElementById('themeToggle');
    
    // Check for saved theme preference or use system preference
    function getPreferredTheme() {
      const storedTheme = localStorage.getItem('theme');
      if (storedTheme) {
        return storedTheme;
      }
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    }
    
    // Apply theme
    function applyTheme(theme) {
      const root = document.documentElement;
      
      if (theme === 'dark') {
        root.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
      } else {
        root.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
      }
    }
    
    // Toggle theme
    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      applyTheme(newTheme);
      
      // Add transition class for smooth change
      document.body.classList.add('theme-transition');
      setTimeout(() => {
        document.body.classList.remove('theme-transition');
      }, 500);
    }
    
    // Initialize theme
    applyTheme(getPreferredTheme());
    
    // Add CSS for theme transition
    const style = document.createElement('style');
    style.textContent = `
      .theme-transition * {
        transition: background-color 0.5s ease, color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease !important;
      }
    `;
    document.head.appendChild(style);
    
    // Event listener for theme toggle button
    themeToggle.addEventListener('click', toggleTheme);
    
    // Listen for system theme changes
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      // Only apply system theme if no manual preference is set
      if (!localStorage.getItem('theme')) {
        applyTheme(e.matches ? 'dark' : 'light');
      }
    });

    // ==================== EXISTING FUNCTIONALITY ====================
    
    // Music Player
    const music = document.getElementById('bg-music');
    const playSongBtn = document.getElementById('playSong');
    let isPlaying = false;

    playSongBtn.addEventListener('click',()=>{
      if(isPlaying){
        music.pause();
        isPlaying = false;
        playSongBtn.textContent = "‚ñ∂ Play Theme Song";
      } else {
        music.play().catch(e => console.log("Autoplay prevented:", e));
        isPlaying = true;
        playSongBtn.textContent = "‚è∏ Pause Music";
      }
    });

    // Pages Navigation
    const introPage = document.getElementById('intro-page');
    const galleryPage = document.getElementById('gallery-page');
    const envelopePage = document.getElementById('envelope-page');
    const timePage = document.getElementById('time-page');
    const counter = document.getElementById('counter');

    // Navigation functions
    document.getElementById('toGallery').addEventListener('click',()=>{
      introPage.classList.remove('active');
      galleryPage.classList.add('active');
      initGallery();
    });
    document.getElementById('backToIntro').addEventListener('click',()=>{
      galleryPage.classList.remove('active');
      introPage.classList.add('active');
    });
    document.getElementById('toEnvelope').addEventListener('click',()=>{
      galleryPage.classList.remove('active');
      envelopePage.classList.add('active');
    });
    document.getElementById('backToGallery').addEventListener('click',()=>{
      envelopePage.classList.remove('active');
      galleryPage.classList.add('active');
      initGallery();
    });
    document.getElementById('toTime').addEventListener('click',()=>{
      envelopePage.classList.remove('active');
      timePage.classList.add('active');
      startCounter();
    });
    document.getElementById('backToEnvelope').addEventListener('click',()=>{
      timePage.classList.remove('active');
      envelopePage.classList.add('active');
    });

    // ENVELOPE FUNCTIONALITY
    // Envelope 1
    const env1 = document.getElementById('env1');
    const letter1 = document.getElementById('letter1');
    let open1 = false;
    
    env1.addEventListener('click', ()=>{
      open1 = !open1;
      env1.classList.toggle('open', open1);
      letter1.setAttribute('aria-hidden', !open1);
    });
    
    // Envelope 2
    const env2 = document.getElementById('env2');
    const letter2 = document.getElementById('letter2');
    let open2 = false;
    
    env2.addEventListener('click', ()=>{
      open2 = !open2;
      env2.classList.toggle('open', open2);
      letter2.setAttribute('aria-hidden', !open2);
    });
    
    // LETTER PAGINATION FUNCTIONALITY WITH ENHANCED NAVIGATION
    function setupLetterPagination(letterId, prevBtnId, nextBtnId) {
      const letter = document.getElementById(letterId);
      const pages = letter.querySelectorAll('.letter-page');
      const prevBtn = document.getElementById(prevBtnId);
      const nextBtn = document.getElementById(nextBtnId);
      const currentPageSpan = letter.querySelector('.current-page');
      const totalPagesSpan = letter.querySelector('.total-pages');
      
      let currentPage = 1;
      const totalPages = pages.length;
      
      totalPagesSpan.textContent = totalPages;
      
      function showPage(pageNum) {
        // Hide all pages
        pages.forEach(page => {
          page.classList.remove('active');
        });
        
        // Show the selected page
        const pageToShow = letter.querySelector(`.letter-page[data-page="${pageNum}"]`);
        if (pageToShow) {
          pageToShow.classList.add('active');
          currentPageSpan.textContent = pageNum;
          currentPage = pageNum;
        }
        
        // Update button states
        prevBtn.disabled = (pageNum === 1);
        nextBtn.disabled = (pageNum === totalPages);
        
        // Style disabled buttons
        prevBtn.style.opacity = (pageNum === 1) ? '0.5' : '1';
        nextBtn.style.opacity = (pageNum === totalPages) ? '0.5' : '1';
      }
      
      // Event listeners for pagination buttons with special behavior
      prevBtn.addEventListener('click', () => {
        if (currentPage > 1) {
          showPage(currentPage - 1);
        } else {
          // If on first page, go to countdown page
          envelopePage.classList.remove('active');
          timePage.classList.add('active');
          startCounter();
        }
      });
      
      nextBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
          showPage(currentPage + 1);
        } else {
          // If on last page, go to countdown page
          envelopePage.classList.remove('active');
          timePage.classList.add('active');
          startCounter();
        }
      });
      
      // Initialize first page
      showPage(1);
    }
    
    // Initialize pagination for both letters with button IDs
    setupLetterPagination('letter1', 'prev-letter-1', 'next-letter-1');
    setupLetterPagination('letter2', 'prev-letter-2', 'next-letter-2');

    // Counter with improved display
    function startCounter(){
      const startDate = new Date("2024-06-06T00:00:00");
      
      function updateCounter() {
        const now = new Date();
        const diff = now - startDate;
        
        const years = Math.floor(diff / (1000 * 60 * 60 * 24 * 365.25));
        const months = Math.floor((diff % (1000 * 60 * 60 * 24 * 365.25)) / (1000 * 60 * 60 * 24 * 30.44));
        const days = Math.floor((diff % (1000 * 60 * 60 * 24 * 30.44)) / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        counter.innerHTML = `
          <span class="cute-heart">‚ù§Ô∏è</span> <strong>${years}</strong> years, <strong>${months}</strong> months, <strong>${days}</strong> days <br><br>
          <span class="cute-heart">üíï</span> <strong>${hours}</strong> hours, <strong>${minutes}</strong> minutes, <strong>${seconds}</strong> seconds <br><br>
          <span class="cute-heart">‚ú®</span> That's <strong>${Math.floor(diff/(1000*60*60*24))}</strong> amazing days together!
        `;
      }
      
      updateCounter();
      setInterval(updateCounter, 1000);
    }

    // Floating Hearts
    const heartsContainer = document.getElementById('hearts');
    function createHeart(){
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.textContent = ["‚ù§", "üíñ", "üíó", "üíì", "üíï", "üíû"][Math.floor(Math.random()*6)];
      heart.style.left = Math.random()*100 + "vw";
      heart.style.fontSize = (18 + Math.random()*24) + "px";
      heart.style.animationDuration = (4 + Math.random()*5) + "s";
      heartsContainer.appendChild(heart);
      setTimeout(()=>heart.remove(),7000);
    }
    setInterval(createHeart,400);

    // ENHANCED GALLERY WITH LIGHTBOX
    const memoryData = [
      { src: "pic1.jpg", title: "Our First Date", date: "The beginning of everything üíñ" },
      { src: "pic2.jpg", title: "Laughing Together", date: "Your smile lights up my world ‚ú®" },
      { src: "pic3.jpg", title: "Special Celebration", date: "Celebrating us üéâ" },
      { src: "pic4.jpg", title: "Quiet Moments", date: "Just you and me üåô" },
      { src: "pic5.jpg", title: "Adventures Together", date: "Exploring life side by side üó∫Ô∏è" },
      { src: "pic6.jpg", title: "Adventures Together", date: "Exploring life side by side üó∫Ô∏è" }
    ];

    const memoryData1 = [
      { src: "pic7.jpg", title: "Adventures Together", date: "Exploring life side by side üó∫Ô∏è" },
      { src: "pic8.jpg", title: "Adventures Together", date: "Exploring life side by side üó∫Ô∏è" },
      { src: "pic9.jpg", title: "Adventures Together", date: "Exploring life side by side üó∫Ô∏è" },
      { src: "pic10.jpg", title: "Adventures Together", date: "Exploring life side by side üó∫Ô∏è" }
    ];
    
    // Add this variable at the top with other variables
    let currentGalleryPage = 1;
    const itemsPerPage = 6;

    function initGallery() {
      const gallery = document.getElementById('memory-gallery');
      gallery.innerHTML = '';
      
      // Determine which images to show based on current page
      let imagesToShow = [];
      if (currentGalleryPage === 1) {
        // Show first 6 images
        imagesToShow = memoryData.slice(0, itemsPerPage);
      } else if (currentGalleryPage === 2 && memoryData1) {
        // Show second page images
        imagesToShow = memoryData1;
      }
      
      imagesToShow.forEach((item, index) => {
        const galleryItem = document.createElement('div');
        galleryItem.className = 'gallery-item';
        galleryItem.innerHTML = `
          <img src="${item.src}" alt="${item.title}" data-index="${index}">
          <div class="photo-label">${item.title}</div>
        `;
        gallery.appendChild(galleryItem);
        
        // Add click event to each image
        galleryItem.querySelector('img').addEventListener('click', () => {
          // Calculate actual index in combined array
          const actualIndex = (currentGalleryPage === 1) ? index : memoryData.length + index;
          openLightbox(actualIndex);
        });
      });
      
      // Update gallery counter text
      const galleryCounter = document.querySelector('.gallery-counter');
      const startIndex = (currentGalleryPage === 1) ? 1 : 7;
      const endIndex = (currentGalleryPage === 1) ? 6 : 10;
      galleryCounter.textContent = `Memories ${startIndex}-${endIndex} of 10`;
    }

    // Update gallery navigation buttons
    document.getElementById('prev-gallery').addEventListener('click', () => {
      if (currentGalleryPage > 1) {
        currentGalleryPage--;
        initGallery();
      }
    });

    document.getElementById('next-gallery').addEventListener('click', () => {
      if (currentGalleryPage < 2) {
        currentGalleryPage++;
        initGallery();
      }
    });
    
    // Lightbox functionality
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    const lightboxTitle = document.getElementById('lightbox-title');
    const lightboxDate = document.getElementById('lightbox-date');
    let currentImageIndex = 0;
    
    // Combine all memory data for lightbox navigation
    const allMemoryData = [...memoryData, ...memoryData1];
    
    function openLightbox(index) {
      currentImageIndex = index;
      const item = allMemoryData[index];
      
      if (item) {
        lightboxImage.src = item.src;
        lightboxTitle.textContent = item.title;
        lightboxDate.textContent = item.date;
        
        lightbox.classList.add('active');
      }
    }
    
    // Lightbox controls
    document.getElementById('close-lightbox').addEventListener('click', () => {
      lightbox.classList.remove('active');
    });
    
    document.getElementById('lightbox-prev').addEventListener('click', (e) => {
      e.stopPropagation();
      currentImageIndex = (currentImageIndex - 1 + allMemoryData.length) % allMemoryData.length;
      const item = allMemoryData[currentImageIndex];
      lightboxImage.src = item.src;
      lightboxTitle.textContent = item.title;
      lightboxDate.textContent = item.date;
    });
    
    document.getElementById('lightbox-next').addEventListener('click', (e) => {
      e.stopPropagation();
      currentImageIndex = (currentImageIndex + 1) % allMemoryData.length;
      const item = allMemoryData[currentImageIndex];
      lightboxImage.src = item.src;
      lightboxTitle.textContent = item.title;
      lightboxDate.textContent = item.date;
    });
    
    // Close lightbox when clicking on background
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) {
        lightbox.classList.remove('active');
      }
    });
    
    // Add keyboard navigation for lightbox
    document.addEventListener('keydown', (e) => {
      if (!lightbox.classList.contains('active')) return;
      
      if (e.key === 'Escape') {
        lightbox.classList.remove('active');
      } else if (e.key === 'ArrowLeft') {
        document.getElementById('lightbox-prev').click();
      } else if (e.key === 'ArrowRight') {
        document.getElementById('lightbox-next').click();
      }
    });
    
    // Initialize the page
    initGallery();
  </script>
</body>
</html>